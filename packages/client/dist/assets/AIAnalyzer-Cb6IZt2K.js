import{e as V,j as _,r as A,f as e,k as C,B as a,T as l,a9 as y,aa as N,ab as v,ac as I,m as S,h as L,H as z,i}from"./index-DdvmxcJt.js";import{A as w}from"./Alert-DxquFv7J.js";import"./useSlot-BuEaihJ4.js";const j=V(_.jsx("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh"),W=({fromBranch:o,toBranch:t,branches:m,onFromBranchChange:D,onToBranchChange:h,isLoadingBranches:u,repoPath:s})=>{var g;const[d,p]=A.useState(!1),[r,E]=A.useState(null),[x,b]=A.useState(null),[f,k]=A.useState(""),U=async()=>{if(!s){b("Please select a repository first");return}if(!o||!t){b("Please select both branches to analyze");return}p(!0),b(null);try{const n=await fetch("/api/code-review/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({repoPath:s,baseBranch:o,headBranch:t,prompt:f.trim()})});if(!n.ok)throw new Error("Failed to analyze changes");const c=await n.json();E(c)}catch(n){console.error("Error analyzing changes:",n),b(n.message)}finally{p(!1)}};return e.jsxDEV(C,{maxWidth:"xl",children:[e.jsxDEV(a,{sx:{mb:4},children:[e.jsxDEV(l,{variant:"h5",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[e.jsxDEV(j,{color:"primary"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:78,columnNumber:11},void 0),"AI Analysis"]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:77,columnNumber:9},void 0),e.jsxDEV(a,{sx:{display:"flex",gap:2,mb:3},children:[e.jsxDEV(y,{sx:{minWidth:200},children:[e.jsxDEV(N,{children:"From Branch"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:83,columnNumber:13},void 0),e.jsxDEV(v,{value:o,label:"From Branch",onChange:n=>D(n.target.value),disabled:u||!s||m.length===0,children:m.map(n=>e.jsxDEV(I,{value:n,children:n},n,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:91,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:84,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:82,columnNumber:11},void 0),e.jsxDEV(y,{sx:{minWidth:200},children:[e.jsxDEV(N,{children:"To Branch"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:98,columnNumber:13},void 0),e.jsxDEV(v,{value:t,label:"To Branch",onChange:n=>h(n.target.value),disabled:u||!s||m.length===0,children:m.map(n=>e.jsxDEV(I,{value:n,children:n},n,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:106,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:99,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:97,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:81,columnNumber:9},void 0),e.jsxDEV(a,{sx:{mb:3},children:[e.jsxDEV(l,{variant:"subtitle1",gutterBottom:!0,children:"Custom Instructions for AI Analysis"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:115,columnNumber:11},void 0),e.jsxDEV(S,{id:"ai-prompt",multiline:!0,rows:3,value:f,onChange:n=>k(n.target.value),placeholder:"Enter specific instructions for the AI analysis (e.g., 'Focus on security issues' or 'Explain the changes in simple terms')",disabled:d,fullWidth:!0,variant:"outlined",sx:{backgroundColor:"background.paper"}},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:114,columnNumber:9},void 0),e.jsxDEV(a,{sx:{display:"flex",justifyContent:"flex-start"},children:e.jsxDEV(L,{variant:"contained",onClick:U,disabled:!s||!o||!t||d||u,startIcon:e.jsxDEV(j,{},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:137,columnNumber:24},void 0),children:d?"Analyzing...":"Analyze Changes"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:133,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:132,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:76,columnNumber:7},void 0),u?e.jsxDEV(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:8},children:[e.jsxDEV(z,{},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:154,columnNumber:11},void 0),e.jsxDEV(l,{color:"text.secondary",children:"Loading branches..."},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:155,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:145,columnNumber:9},void 0):s?d?e.jsxDEV(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:8},children:[e.jsxDEV(z,{},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:181,columnNumber:11},void 0),e.jsxDEV(l,{color:"text.secondary",children:"Analyzing changes using AI..."},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:182,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:172,columnNumber:9},void 0):x?e.jsxDEV(w,{severity:"error",sx:{mb:3},children:x},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:187,columnNumber:9},void 0):r?e.jsxDEV(a,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxDEV(i,{sx:{p:3},children:[e.jsxDEV(l,{variant:"h6",gutterBottom:!0,children:"Summary"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:206,columnNumber:13},void 0),e.jsxDEV(l,{color:"text.secondary",children:r.summary},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:209,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:205,columnNumber:11},void 0),((g=r.suggestions)==null?void 0:g.length)>0&&e.jsxDEV(i,{sx:{p:3},children:[e.jsxDEV(l,{variant:"h6",gutterBottom:!0,children:"Suggestions"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:217,columnNumber:15},void 0),e.jsxDEV(a,{component:"ul",sx:{mt:2,pl:2},children:r.suggestions.map((n,c)=>e.jsxDEV(l,{component:"li",color:"text.secondary",sx:{mb:1},children:n},c,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:222,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:220,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:216,columnNumber:13},void 0),r.codeQuality&&e.jsxDEV(i,{sx:{p:3},children:[e.jsxDEV(l,{variant:"h6",gutterBottom:!0,children:"Code Quality Insights"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:238,columnNumber:15},void 0),e.jsxDEV(a,{sx:{mt:2},children:Object.entries(r.codeQuality).map(([n,c])=>e.jsxDEV(a,{sx:{mb:2},children:[e.jsxDEV(l,{variant:"subtitle2",gutterBottom:!0,children:n},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:244,columnNumber:21},void 0),e.jsxDEV(l,{color:"text.secondary",children:c},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:247,columnNumber:21},void 0)]},n,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:243,columnNumber:19},void 0))},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:241,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:237,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:203,columnNumber:9},void 0):e.jsxDEV(i,{sx:{p:3,textAlign:"center",color:"text.secondary",border:"1px dashed",borderColor:"divider"},children:"Select branches and click Analyze to get AI-powered insights"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:191,columnNumber:9},void 0):e.jsxDEV(i,{sx:{p:3,textAlign:"center",color:"text.secondary",border:"1px dashed",borderColor:"divider"},children:"Please select a repository to begin"},void 0,!1,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:160,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/devang/Documents/local_rabbit/packages/client/src/components/AIAnalyzer/AIAnalyzer.jsx",lineNumber:75,columnNumber:5},void 0)};export{W as default};
